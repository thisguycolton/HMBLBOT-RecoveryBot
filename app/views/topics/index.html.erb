<div class="container-fluid">
  <div class="jumbotron text-bg-light py-5">
    <div class="container">
      <h1 class="display-1 fw-bolder" id="animateMe"> The Topicificator 9000 </h1>
      <h3 class="display-6"><%= @all_topics.count %> Topics and Counting</h3>
      <br/>
      <%= search_form_for @q do |f| %>
        <div class="input-group input-group-lg mb-3">
          <%= f.search_field :title_or_searchable_number_cont, placeholder: "Search For A Topic By Name or Number", class: "form-control" %>
          <%= f.submit "Search", class: 'btn btn-success' %>
        </div>
      <% end %>
      <%= search_form_for @q do |f| %>
          <%= f.hidden_field :searchable_number_eq, value: @random.to_s %>
          <div class="d-grid gap-2 col-lg-6 mx-auto mt-5">
            <%= f.button :submit, class: 'btn btn-lg btn-primary p-3' do %>
              <i class="bi bi-shuffle"></i> <span class="display-6 p-4"> Random </span><i class="bi bi-shuffle"></i> 
            <% end %>
          </div>
      <% end %>

  </div>
</div>
<div class="container">
  <div class="row">
    <div id="topics" class="">
      <% if @topics.any? && params[:q].present? %>
        <% @topics.each do |topic| %>
          <%= render topic %>
        <% end %>

      <% elsif @topics.any? %>
        <div class="bg-info w-100 rounded-bottom">
          <p class="lead fw-normal p-3 text-light">
            Thanks for trying out <span class="fw-bolder">The Topicificator 9000</span>. You can use the search bar above to find a topic matching a word, or the number associated with that topic. Or you can have a topic randomly picked for you! Here are <span class="fw-bolder">four example topics</span>:
          </p>
        </div>
        <% @topics.each do |topic| %>
          <%= render topic %>
        <% end %>
      <% else %>
          <div class="card bg-danger text-light text-center">
    <div class="p-5">
      <h1 class="display-4"><span class="fw-bold">No '<%= @q.title_or_searchable_number_cont %>' Topic Found</h1>
    </div>
  </div>
      <% end %>
    </div>
  </div>

</div>

<script type="text/javascript">
  

import Letterize from "https://cdn.skypack.dev/letterizejs@2.0.0";
var test = new Letterize({
      targets: "#animateMe"
    });

    test.listAll;
    for (var i = 0; i < test.listAll.length; i++) {
      test.listAll[i].addEventListener("mouseover", function(e) {
        e.target = anime({
          targets: e.target,
          duration: 100,
          translateX: anime.random(-10,10),
          translateY: anime.random(-10,10),
          rotate: anime.random(-10,10),
          opacity: 0.5
        });
      });

      test.listAll[i].addEventListener("mouseout", function(e) {
        e.target = anime({
          targets: e.target,
          duration: 3000,
          opacity: 1
        });
      });
    }


</script>